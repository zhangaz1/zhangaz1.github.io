<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg"
    />
    <style>
      a[title="站长统计"] {
        display: none;
      }
    </style>
    <link rel="stylesheet" href="/dumi/umi.ee5df49f.css" />
    <script>
      window.routerBase = "/dumi/";
    </script>
    <script>
      //! umi version: 3.2.19
    </script>
    <title>控制菜单生成</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="/dumi//">dumi</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a aria-current="page" class="active" href="/dumi//guide">指南</a><a href="/dumi//config">配置项</a><a href="/dumi//examples">渲染示例</a><a href="/dumi//lab">实验室</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/dumi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/dumi/releases">更新日志<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="/dumi//"></a><h1>dumi</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/dumi//guide">指南</a></li><li><a href="/dumi//config">配置项</a></li><li><a href="/dumi//examples">渲染示例</a></li><li><a href="/dumi//lab">实验室</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/dumi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/dumi/releases">更新日志<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a target="_blank" rel="noopener noreferrer">介绍</a><ul><li><a href="/dumi//guide"><span>介绍</span></a></li><li><a href="/dumi//guide/getting-started"><span>快速上手</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">写组件 Demo</a><ul><li><a href="/dumi//guide/demo-principle"><span>dumi 的 Demo 理念</span></a></li><li><a href="/dumi//guide/demo-types"><span>Demo 的类型</span></a></li><li><a href="/dumi//guide/control-demo-render"><span>控制 Demo 渲染</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">控制菜单和路由生成</a><ul><li><a href="/dumi//guide/control-route-generate"><span>控制路由生成</span></a></li><li><a aria-current="page" class="active" href="/dumi//guide/control-menu-generate"><span>控制菜单生成</span></a></li><li><a href="/dumi//guide/control-nav-generate"><span>控制导航生成</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">更多用法</a><ul><li><a href="/dumi//guide/mode"><span>多种呈现模式</span></a></li><li><a href="/dumi//guide/multi-language"><span>多语言支持</span></a></li><li><a href="/dumi//guide/seo"><span>SEO 支持</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">其他</a><ul><li><a href="/dumi//guide/migration"><span>从 father-doc 迁移</span></a></li><li><a href="/dumi//guide/faq"><span>FAQ</span></a></li></ul></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="约定式菜单规则" data-depth="2"><a href="/dumi//guide/control-menu-generate#约定式菜单规则"><span>约定式菜单规则</span></a></li><li title="控制分组名称" data-depth="3"><a href="/dumi//guide/control-menu-generate#控制分组名称"><span>控制分组名称</span></a></li><li title="控制分组路径" data-depth="3"><a href="/dumi//guide/control-menu-generate#控制分组路径"><span>控制分组路径</span></a></li><li title="控制分组排序" data-depth="3"><a href="/dumi//guide/control-menu-generate#控制分组排序"><span>控制分组排序</span></a></li><li title="配置式侧边菜单" data-depth="2"><a href="/dumi//guide/control-menu-generate#配置式侧边菜单"><span>配置式侧边菜单</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="控制菜单生成"><a aria-hidden="true" href="/dumi//guide/control-menu-generate#控制菜单生成"><span class="icon,icon-link"></span></a>控制菜单生成</h1><h2 id="约定式菜单规则"><a aria-hidden="true" href="/dumi//guide/control-menu-generate#约定式菜单规则"><span class="icon,icon-link"></span></a>约定式菜单规则</h2><p>dumi 的文档菜单是建立在路由结构上的。路由的嵌套关系会被 dumi 解析为菜单分组，先看看 dumi 会怎么识别路由结构：</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">/                       </span><span class="token comment"># 未分组</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">/guide                  </span><span class="token comment"># 指南分组</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">/guide/help             </span><span class="token comment"># 指南分组</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">/other                  </span><span class="token comment"># 其他分组</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">/very/very/deep/child   </span><span class="token comment"># 注意，/very/very/deep 会被整个识别为分组</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>然后这个识别结果会被展示为：</p><ul><li>根路径</li><li>guide<ul><li>guide</li><li>help</li></ul></li><li>other</li><li>very/very/deep<ul><li>child</li></ul></li></ul><p>和预期基本一致，但这里有个问题：<code>very/very/deep</code> 下面只有一个子项的时候还展示为分组非常奇怪，为了满足特殊场景（真的需要对单独子项做分组）和常规场景（省略分组），dumi 有个设定：</p><p><strong>当分组名与子路由标题一致且只有一个子路由时</strong>，该项就不会展示为分组了，就像 <code>other</code> 分组一样。但如何配置分组名呢？请接着往下看。</p><h3 id="控制分组名称"><a aria-hidden="true" href="/dumi//guide/control-menu-generate#控制分组名称"><span class="icon,icon-link"></span></a>控制分组名称</h3><p>分组名称的默认生成规则是，取分组的路由名称去掉 <code>/</code> 并首字母大写。比如，路由是 <code>/guide/help</code>，dumi 将会去掉末端路由 <code>/help</code> 将 <code>/guide</code> 当做分组，并且去掉 <code>/</code> 再首字母大写变成 <code>Guide</code>。</p><p>如果希望手动控制分组名称，可以使用 <a href="/dumi//config/frontmatter#grouptitle">名为 <code>group.title</code> 的 frontmatter 配置项</a> 进行配置。</p><h3 id="控制分组路径"><a aria-hidden="true" href="/dumi//guide/control-menu-generate#控制分组路径"><span class="icon,icon-link"></span></a>控制分组路径</h3><p>分组路径的默认生成规则是，将路由的最后一段去掉，前面无论多长都会作为分组路径。比如，路由是 <code>/very/very/deep/child</code>，那么 <code>very/very/deep</code> 则会作为分组路径。</p><p>如果希望手动控制分组路径，可以使用 <a href="/dumi//config/frontmatter#grouppath">名为 <code>group.path</code> 的 frontmatter 配置项</a> 进行配置。</p><h3 id="控制分组排序"><a aria-hidden="true" href="/dumi//guide/control-menu-generate#控制分组排序"><span class="icon,icon-link"></span></a>控制分组排序</h3><p>分组的默认排序规则为，先对比 <code>path</code> 的长度，例如 <code>/guide</code> 肯定排在 <code>/guide/help</code> 前面，其次对比分组名称的 ASCII 码，比如 <code>Guide</code> 肯定排在 <code>Help</code> 前面。</p><p>如果希望手动控制分组顺序，可以使用 <a href="/dumi//config/frontmatter#grouporder">名为 <code>group.order</code> 的 frontmatter 配置项</a> 进行配置，数字越小越靠前。</p><h2 id="配置式侧边菜单"><a aria-hidden="true" href="/dumi//guide/control-menu-generate#配置式侧边菜单"><span class="icon,icon-link"></span></a>配置式侧边菜单</h2><p><div class="__dumi-default-alert">注意：目前仅 <code>site</code> 模式下可用。</div></p><p>如果发现约定式无法满足需要，可通过 <a href="/dumi//config#mennus"><code>menus</code> 配置项</a> 对侧边菜单进行<strong>增量自定义</strong>：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// config/config.ts 或 .umirc.ts</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  menus</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 需要自定义侧边菜单的路径，没有配置的路径还是会使用自动生成的配置</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;/guide&#x27;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;菜单项&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        path</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;菜单路由（可选）&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        children</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token comment">// 菜单子项（可选）</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">&#x27;guide/index.md&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// 对应的 Markdown 文件，路径是相对于 resolve.includes 目录识别的</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 如果该路径有其他语言，需在前面加上语言前缀，需与 locales 配置中的路径一致</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;/zh-CN/guide&#x27;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// 省略，配置同上</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/dumi/edit/master/docs/guide/control-menu-generate.md">在 GitHub 上编辑这篇文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">3/22/2020, 1:25:43 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="https://v1.cnzz.com/z_stat.php?id=1278653578&web_id=1278653578"></script>
    <script src="/dumi/umi.7b73bdbe.js"></script>
  </body>
</html>
